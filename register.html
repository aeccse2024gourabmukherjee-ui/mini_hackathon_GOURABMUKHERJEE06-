<!DOCTYPE html>
<html>
<head>
  <title>Register</title>
  <base href="./">

  <style>
    body {
      margin: 0;
      font-family: Arial;
      background-image:url("https://images.unsplash.com/photo-1635776062043-223faf322554?fm=jpg&q=60&w=3000&ixlib=rb-4.1.0&ixid=M3wxMjA3fDB8MHxzZWFyY2h8N3x8Z3JhZGllbnQlMjBiYWNrZ3JvdW5kfGVufDB8fDB8fHww");
      background-size: cover;
      background-position: centre;
      height:80vh;

    }

    .box {
      width: 300px;
      background: white;
      padding: 20px;
      margin: 100px auto;
      border-radius: 5px;
      text-align: center;
    }

    input, button {
      background-color: rgb(82, 176, 115);
      width: 100%;
      padding: 8px;
      margin-top: 10px;
    }
  </style>
</head>

<body>
  <div class="box">
  <h2>Register</h2>

  <form onsubmit="registerUser(event)">
    <input id="name" placeholder="Name" required>
    <input id="email" placeholder="Email" required>
    <input id="password" type="password" placeholder="Password" required>

    <button type="submit">Register</button>
  </form>
</div>

<script>
const API_BASE = "https://mini-hackathon-gourabmukherjee06.onrender.com";

async function registerUser(event) {
  event.preventDefault();

  const name = document.getElementById("name").value;
  const email = document.getElementById("email").value;
  const password = document.getElementById("password").value;

  if (!name || !email || !password) {
    alert("All fields required");
    return;
  }

  try {
    const res = await fetch(`${API_BASE}/auth/register`, {
      method: "POST",
      headers: { "Content-Type": "application/json" },
      body: JSON.stringify({ name, email, password })
    });

    const data = await res.json();

    if (!res.ok) {
      alert(data.message || "Registration failed");
      return;
    }

    alert("Registration successful");
    window.location.href = "index.html";
  } catch (err) {
    alert("Server error");
  }
}
</script>

</body>
</html>