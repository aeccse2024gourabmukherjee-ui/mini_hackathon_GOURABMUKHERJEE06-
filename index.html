<!DOCTYPE html>
<html>
<head>
  <title>Login</title>
  <base href="./">

  <style>
    body {
      margin: 0;
      font-family: Arial;
      background-image: url("https://img.freepik.com/premium-vector/abstract-smooth-blur-purple-gradient-background-website-banner-paper-card-decorative-design_120819-485.jpg");
      background-size: cover;
      background-position: center;
      height: 100vh;
    }

    .box {
      width: 300px;
      background: white;
      padding: 20px;
      margin: 120px auto;
      border-radius: 5px;
      text-align: center;
    }
    .h2{
      font-weight: bolder;
    
    }

    input {
      font-weight: bold;
      width: 100%;
      padding: 8px;
      margin-top: 10px;
    }
    button{
      background-color: blue;
      width:20vw;
      height:35px;
      font-weight: 400;
    }
  </style>
</head>

<body>
  <div class="box">
    <h2>LOGIN</h2>
<form onsubmit="loginUser(event)">
  <input id="email" type="email" placeholder="Email">
  <input id="password" type="password" placeholder="Password">
  <button type="submit">Login</button>
</form>
   <p> <a href="register.html">Register</a></p>
  </div>
  
  <script>
const API_BASE = "https://mini-hackathon-gourabmukherjee06.onrender.com";

async function loginUser(event) {
  event.preventDefault();

  const email = document.getElementById("email").value;
  const password = document.getElementById("password").value;

  if (!email || !password) {
    alert("Email and password required");
    return;
  }

  try {
    const res = await fetch(`${API_BASE}/auth/login`, {
      method: "POST",
      headers: { "Content-Type": "application/json" },
      body: JSON.stringify({ email, password })
    });

    const data = await res.json();

    if (!res.ok) {
      alert(data.message || "Login failed");
      return;
    }

    localStorage.setItem("token", data.token);
    localStorage.setItem("username", data.name);

    alert("Login successful");
    window.location.href = "dashboard.html";
  } catch (err) {
    alert("Server error");
  }
}
</script>


</body>
</html>